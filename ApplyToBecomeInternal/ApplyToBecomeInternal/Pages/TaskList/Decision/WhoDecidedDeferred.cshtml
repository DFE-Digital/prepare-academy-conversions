@page "/task-list/{id:int}/decision/Deferred/who-decided-deferred"
@model ApplyToBecomeInternal.Pages.TaskList.Decision.WhoDecidedDeferredModel
@{
    ViewData["Title"] = "Who made this decision?";
}
@section BeforeMain
{   
    <partial name="_BackLink" model="@Model.BackLinkModel"/>
}
    <span id="selection-span" class="govuk-caption-l">@Model.SchoolName</span>
    <h1 class="govuk-heading-l">Who made this decision?</h1>

    <form method="post">

        <div class="govuk-form-group">
            <fieldset class="govuk-fieldset">
                <legend class="govuk-fieldset__legend govuk-fieldset__legend--l">
                </legend>
                <div class="govuk-radios" data-module="govuk-radios">

                    @{
                    int counter = 0;
                    }

                @foreach (var decisionOption in Model.DecisionMadeByOptions)
                {
                    {
                        counter++;
                    }

                if (@decisionOption.ToDescription() != "Other")
                    {
                        <div class="govuk-radios__item">
                            <input class="govuk-radios__input" type="radio" asp-for="@Model.DecisionMadeBy"                           
                                title="@decisionOption.ToString().ToLower()" value="@decisionOption.ToString()" 
                                id="@decisionOption.ToString().ToLower()-radio-@counter" data-aria-controls="conditional-@counter"/>
                            <label class="govuk-label govuk-radios__label" asp-for="@Model.DecisionMadeBy" for="@decisionOption.ToString().ToLower()-Text-@counter">
                                @decisionOption.ToDescription()
                            </label>
                        </div>
                    }
                    else if (@decisionOption.ToDescription() == "Other")
                    {
                        <div class="govuk-radios__item"> 
                                    <input class="govuk-radios__input" type="radio" asp-for="@Model.DecisionMadeBy"                           
                                title="@decisionOption.ToString().ToLower()" value="@decisionOption.ToString()" 
                                id="@decisionOption.ToString().ToLower()-radio-@counter" data-aria-controls="conditional-@counter"/>
                            <label class="govuk-label govuk-radios__label" asp-for="@Model.DecisionMadeBy" for="@decisionOption.ToString().ToLower()-Text-@counter">
                                @decisionOption.ToDescription()
                            </label>
                        </div> 
                        <div class="govuk-radios__conditional govuk-radios__conditional--hidden" id="conditional-@counter"> 
                        <div class="govuk-form-group"> <label class="govuk-label" for="@decisionOption.ToString().ToLower()-Deferred">Who made the decision</label> 
                            <input class="govuk-input govuk-!-width-one-third" id="@decisionOption.ToString().ToLower()-Deferred" name="@decisionOption.ToString().ToLower()-Deferred" type="text" autocomplete="text"> 
                        </div>
               </div>               
               }                     
                    
                }
            </div>
        </fieldset>
    </div>

    <button class="govuk-button" data-module="govuk-button" id="submit-btn">
        Continue
    </button>
</form>
