@using Dfe.PrepareConversions.Utils
@model Dfe.PrepareConversions.Models.ProjectList.ProjectListFilters
<div class="moj-filter">

    <div class="moj-filter__header">

        <div class="moj-filter__header-title">
            <h2 class="govuk-heading-m">Filter</h2>
        </div>

        <div class="moj-filter__header-action">
        </div>

    </div>

    <div class="moj-filter__content">
        <div if="Model.IsVisible" class="moj-filter__selected">

            <div class="moj-filter__selected-heading">

                <div class="moj-filter__heading-title">
                    <h2 class="govuk-heading-m">Selected filters</h2>
                </div>

                <div class="moj-filter__heading-action" >
					<p><a class="govuk-link govuk-link--no-visited-state" data-cy="clear-filter" href="@Url.RouteUrl(ViewContext.RouteData.Values)?clear">Clear filters</a></p>
                </div>

            </div>
            @if (Model.SelectedOfficers.Length > 0)
            {
                <h3 class="govuk-heading-s govuk-!-margin-bottom-0">Assigned to</h3>

                <ul class="moj-filter-tags">
                    @{
                        foreach (var officer in Model.SelectedOfficers)
                                {
                            <li><a class="moj-filter__tag" href="@Url.RouteUrl(ViewContext.RouteData.Values)?remove&selectedOfficers=@officer"><span class="govuk-visually-hidden">Remove this filter</span> @officer.Stub()</a></li>
                        }
                    }

                </ul>
            }
            @if (Model.SelectedRegions.Length > 0)
            {
                <h3 class="govuk-heading-s govuk-!-margin-bottom-0">Region</h3>

                <ul class="moj-filter-tags">
                    @{
                        foreach (var region in Model.SelectedRegions)
                        {
                            <li><a class="moj-filter__tag" href="@Url.RouteUrl(ViewContext.RouteData.Values)?remove&SelectedRegions=@region"><span class="govuk-visually-hidden">Remove this filter</span> @region.Stub()</a></li>
                        }
                    }

                </ul>
            }
            @if (Model.SelectedLocalAuthorities.Length > 0)
            {
                <h3 class="govuk-heading-s govuk-!-margin-bottom-0">Local Authority</h3>

                <ul class="moj-filter-tags">
                    @{
                        foreach (var localAuthority in Model.SelectedLocalAuthorities)
                        {
                            <li><a class="moj-filter__tag" href="@Url.RouteUrl(ViewContext.RouteData.Values)?remove&SelectedLocalAuthorities=@localAuthority"><span class="govuk-visually-hidden">Remove this filter</span> @localAuthority.Stub()</a></li>
                        }
                    }

                </ul>
            }
            @if (Model.SelectedStatuses.Length > 0)
            {
            <h3 class="govuk-heading-s govuk-!-margin-bottom-0">Project status</h3>

            <ul class="moj-filter-tags">
                @{
                    foreach (var status in Model.SelectedStatuses)
                    {
                            <li><a class="moj-filter__tag" href="@Url.RouteUrl(ViewContext.RouteData.Values)?remove&SelectedStatuses=@status"><span class="govuk-visually-hidden">Remove this filter</span> @status.Stub()</a></li>
                    }
                }

            </ul>
            }
            @if (Model.SelectedAdvisoryBoardDates.Length > 0)
            {
                <h3 class="govuk-heading-s govuk-!-margin-bottom-0">Advisory board date</h3>

                <ul class="moj-filter-tags">
                    @{
                        foreach (var date in Model.SelectedAdvisoryBoardDates)
                        {
                            <li><a class="moj-filter__tag" href="@Url.RouteUrl(ViewContext.RouteData.Values)?remove&SelectedAdvisoryBoardDates=@date"><span class="govuk-visually-hidden">Remove this filter</span> @date.Stub()</a></li>
                        }
                    }

                </ul>
            }
        </div>

        <div class="moj-filter__options">
            <form method="get" class="form">
                <button class="govuk-button" data-module="govuk-button" data-test-id="submit-button" data-cy='select-projectlist-filter-apply'>
                    Apply filters
                </button>

                <div class="govuk-form-group">
                    <label class="govuk-label govuk-label--m" for="projects">
                        Search for projects
                    </label>
                    <span class="govuk-hint">You can search by school name, academy name, trust name and URN</span>
                    <input id="Title" name="Title" asp-for="Title" type="text" class="govuk-input" aria-describedby="filter-project-title-hint"
                           data-cy="select-projectlist-filter-title">

                </div>

                <div class="govuk-form-group">

                    <fieldset class="govuk-fieldset">
                        <div class="govuk-accordion" data-module="govuk-accordion" id="accordion-default">
                            <div class="govuk-accordion__section">
                                <div class="govuk-accordion__section-header">
                                    <h2 class="govuk-accordion__section-heading">
                                        <span class="govuk-accordion__section-button" id="accordion-default-heading-1">
                                            Assigned to
                                        </span>
                                    </h2>
                                </div>
                                <div id="accordion-default-content-1" class="govuk-accordion__section-content" aria-labelledby="accordion-default-heading-1" >
                                    @{
                                        <div class="govuk-checkboxes__item">
                                            <input class="govuk-checkboxes__input" id="filter-delivery-officer-not-assigned"
                                                   name="selectedOfficers" type="checkbox" value="Not assigned" @(Model.SelectedOfficers.Contains("Not assigned") ? "checked" : null)
                                                   data-cy="select-projectlist-filter-officer-not-assigned">
                                            <label class="govuk-label govuk-checkboxes__label" for="filter-delivery-officer-not-assigned">
                                                Not assigned
                                            </label>
                                        </div>
                                        foreach (var officer in Model.AvailableDeliveryOfficers)
                                        {
                                            <div class="govuk-checkboxes__item">
                                                <input class="govuk-checkboxes__input" id="filter-delivery-officer-@officer.Stub()"
                                                       name="selectedOfficers" type="checkbox" value="@officer" @(Model.SelectedOfficers.Contains(officer) ? "checked" : null)
                                                       data-cy="select-projectlist-filter-officer-@officer">
                                                <label class="govuk-label govuk-checkboxes__label" for="filter-delivery-officer-@officer.Stub()">
                                                    @officer
                                                </label>
                                            </div>
                                        }
                                    }
                                </div>
                            </div>
                            <div class="govuk-accordion__section">
                                <div class="govuk-accordion__section-header">
                                    <h2 class="govuk-accordion__section-heading">
										<span class="govuk-accordion__section-button" id="accordion-default-heading-1" data-cy="select-projectlist-filter-region">
                                            Region
                                        </span>
                                    </h2>
                                </div>
                                <div id="accordion-default-content-1" class="govuk-accordion__section-content" aria-labelledby="accordion-default-heading-1">
                                    <div class="govuk-checkboxes govuk-checkboxes--small govuk-clearfix" data-module="govuk-checkboxes">
                                        @{
                                            foreach (var region in Model.AvailableRegions)
                                            {
                                                <div class="govuk-checkboxes__item">
                                                    <input class="govuk-checkboxes__input" id="filter-project-region-@region.Stub()"
                                                           name="selectedregions" type="checkbox" value="@region" @(Model.SelectedRegions.Contains(region) ? "checked" : null)
                                                           data-cy="select-projectlist-filter-region-@region">
                                                    <label class="govuk-label govuk-checkboxes__label" for="filter-project-region-@region.Stub()">
                                                        @region
                                                    </label>
                                                </div>
                                            }
                                        }
                                    </div>
                                </div>
                            </div>
                            <div class="govuk-accordion__section">
                                <div class="govuk-accordion__section-header">
                                    <h2 class="govuk-accordion__section-heading">
										<span class="govuk-accordion__section-button" id="accordion-default-heading-1" data-cy="select-projectlist-filter-local-authority">
                                            Local Authority
                                        </span>
                                    </h2>
                                </div>
                                <div id="accordion-default-content-1" class="govuk-accordion__section-content" aria-labelledby="accordion-default-heading-1">
                                    <div class="govuk-checkboxes govuk-checkboxes--small govuk-clearfix" data-module="govuk-checkboxes">
                                        @{
                                            foreach (var localAuthority in Model.AvailableLocalAuthorities)
                                            {
                                                <div class="govuk-checkboxes__item">
                                                    <input class="govuk-checkboxes__input" id="filter-project-local-authority-@localAuthority.Stub()"
                                                           name="selectedLocalAuthorities" type="checkbox" value="@localAuthority" @(Model.SelectedLocalAuthorities.Contains(localAuthority) ? "checked" : null)
                                                           data-cy="select-projectlist-filter-local-authority-@localAuthority">
                                                    <label class="govuk-label govuk-checkboxes__label" for="filter-project-local-authority-@localAuthority.Stub()">
                                                        @localAuthority
                                                    </label>
                                                </div>
                                            }
                                        }
                                    </div>
                                </div>
                            </div>

                            <div class="govuk-accordion__section">
                                <div class="govuk-accordion__section-header">
                                    <h2 class="govuk-accordion__section-heading">
										<span class="govuk-accordion__section-button" id="accordion-default-heading-1" data-cy="select-projectlist-filter-project-status">
                                            Project status
                                        </span>
                                    </h2>
                                </div>
                                <div id="accordion-default-content-1" class="govuk-accordion__section-content" aria-labelledby="accordion-default-heading-1">
                                    <div class="govuk-checkboxes govuk-checkboxes--small govuk-clearfix" data-module="govuk-checkboxes">
                                        @{
                                            foreach (var status in Model.AvailableStatuses)
                                            {
                                                <div class="govuk-checkboxes__item">
                                                    <input class="govuk-checkboxes__input" id="filter-project-status-@status.Stub()"
                                                           name="selectedStatuses" type="checkbox" value="@status" @(Model.SelectedStatuses.Contains(status) ? "checked" : null)
                                                           data-cy="select-projectlist-filter-status-@status">
                                                    <label class="govuk-label govuk-checkboxes__label" for="filter-project-status-@status.Stub()">
                                                        @status
                                                    </label>
                                                </div>
                                            }
                                        }
                                    </div>
                                </div>
                            </div>


                            <div class="govuk-accordion__section">
                                <div class="govuk-accordion__section-header">
                                    <h2 class="govuk-accordion__section-heading">
										<span class="govuk-accordion__section-button" id="accordion-default-heading-1" data-cy="select-projectlist-filter-advisory-board-date">
                                            Advisory board date
                                        </span>
                                    </h2>
                                </div>
                                <div id="accordion-default-content-1" class="govuk-accordion__section-content" aria-labelledby="accordion-default-heading-1">
                                    @{
                                        foreach (var boardDates in Model.AvailableAdvisoryBoardDates)
                                        {
                                            <div class="govuk-checkboxes__item">
                                                <input class="govuk-checkboxes__input" id="filter-project-advisory-board-@boardDates.Stub()"
                                                       name="selectedAdvisoryBoardDates" type="checkbox" value="@boardDates" @(Model.SelectedAdvisoryBoardDates.Contains(boardDates) ? "checked" : null)
                                                       data-cy="select-projectlist-filter-advisory-board-@boardDates">
                                                <label class="govuk-label govuk-checkboxes__label" for="filter-project-advisory-board-@boardDates.Stub()">
                                                    @boardDates
                                                </label>
                                            </div>
                                        }
                                    }
                                </div>
                            </div>

                        </div>


                    </fieldset>

                </div>
            </form>
        </div>

    </div>

</div>
